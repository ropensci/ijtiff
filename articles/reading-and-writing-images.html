<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reading and Writing Images • ijtiff</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Reading and Writing Images">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ijtiff</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/reading-and-writing-images.html">Reading and Writing Images</a>
    </li>
    <li>
      <a href="../articles/text-images.html">Text Images</a>
    </li>
    <li>
      <a href="../articles/the-imagej-problem.html">The _ImageJ_ Problem</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Reading and Writing Images</h1>
            
            <h4 class="date">2019-12-05</h4>
      
      
      <div class="hidden name"><code>reading-and-writing-images.Rmd</code></div>

    </div>

    
    
<div id="reading-tiff-files" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-tiff-files" class="anchor"></a>Reading TIFF files</h2>
<p>Check out the following video:</p>
<p><img src="../../../../R/Library/ijtiff/img/Rlogo-banana.gif"></p>
<p>As you can see, it’s a colour video of a banana dancing in front of the R logo. Hence, it has colour channel (red, green and blue) and frame (a video is comprised of several <em>frames</em>) information inside. I have this video saved in a TIFF file.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">path_dancing_banana &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"img"</span>, <span class="st">"Rlogo-banana.tif"</span>,</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">                                   <span class="dt">package =</span> <span class="st">"ijtiff"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(path_dancing_banana)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; [1] "/home/travis/R/Library/ijtiff/img/Rlogo-banana.tif"</span></a></code></pre></div>
<p>To read it in, you just need <code><a href="../reference/read_tif.html">read_tif()</a></code> and the path to the image.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">pacman<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span>(ijtiff, magrittr)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">img_dancing_banana &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_tif.html">read_tif</a></span>(path_dancing_banana)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; Reading Rlogo-banana.tif: an 8-bit, 155x200 pixel image of</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; unsigned integer type. Reading 3 channels and 8 frames . . .</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;  Done.</span></a></code></pre></div>
<p>Let’s take a peek inside of <code>img_dancing_banana</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(img_dancing_banana)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt;  'ijtiff_img' num [1:155, 1:200, 1:3, 1:8] 255 255 255 255 255 255 255 255 255 255 ...</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;  - attr(*, "width")= int 200</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;  - attr(*, "length")= int 155</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;  - attr(*, "bits_per_sample")= int 8</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;  - attr(*, "samples_per_pixel")= int 3</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;  - attr(*, "sample_format")= chr "uint"</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;  - attr(*, "planar_config")= chr "contiguous"</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  - attr(*, "rows_per_strip")= int 155</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  - attr(*, "compression")= chr "LZW"</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  - attr(*, "software")= chr "tiff package, R 3.5.0"</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  - attr(*, "color_space")= chr "RGB"</span></a></code></pre></div>
<p>You can see it’s a 4-dimensional array. The last two dimensions are 3 and 8; this is because these are the channel and frame slots respectively: the image has 3 channels (red, green and blue) and 8 frames. The first two dimensions tell us that the images in the video are 155 pixels tall and 200 pixels wide. The image object is of class <code>ijtiff_img</code>. This guarantees that it is a 4-dimensional array with this structure. The attributes of the <code>ijtiff_img</code> give information on the various TIFF tags that were part of the TIFF image. You can read more about various TIFF tags at <a href="https://www.awaresystems.be/imaging/tiff/tifftags.html" class="uri">https://www.awaresystems.be/imaging/tiff/tifftags.html</a>. To read just the tags and not the image, use the <code><a href="../reference/read_tags.html">read_tags()</a></code> function.</p>
<p>Let’s visualize the constituent parts of that 8-frame, colour TIFF.</p>
<p><img src="reading-and-writing-images_files/figure-html/red-blue-green-banana-1.png" width="100%"></p>
<p>There you go: 8 frames in 3 colours.</p>
<div id="reading-only-certain-frames" class="section level3">
<h3 class="hasAnchor">
<a href="#reading-only-certain-frames" class="anchor"></a>Reading only certain frames</h3>
<p>It’s possible to read only certain frames. This can be a massive time and memory saver when working with large images.</p>
<p>Suppose we only want frames 3, 5 and 7 from the image above.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">img_dancing_banana357 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_tif.html">read_tif</a></span>(path_dancing_banana, <span class="dt">frames =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; Reading Rlogo-banana.tif: an 8-bit, 155x200 pixel image of</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; unsigned integer type. Reading 3 channels and 3 frames . . .</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;  Done.</span></a></code></pre></div>
<p>Let’s visualize again.</p>
<p><img src="reading-and-writing-images_files/figure-html/red-bblue-green-banana357-1.png" width="100%"></p>
<p>Just in case you’re wondering, it’s not currently possible to read only certain channels. This would be more difficult to implement, but if you need this, ask me and I’ll see what I can do.</p>
</div>
<div id="more-examples" class="section level3">
<h3 class="hasAnchor">
<a href="#more-examples" class="anchor"></a>More examples</h3>
<p>If you read an image with only one frame, the frame slot (4) will still be there:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">path_rlogo &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"img"</span>, <span class="st">"Rlogo.tif"</span>, <span class="dt">package =</span> <span class="st">"ijtiff"</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">img_rlogo &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_tif.html">read_tif</a></span>(path_rlogo) </a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; Reading Rlogo.tif: an 8-bit, 76x100 pixel image of unsigned</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; integer type. Reading 4 channels and 1 frame . . .</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;  Done.</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(img_rlogo)  <span class="co"># 4 channels, 1 frame</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; [1]  76 100   4   1</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(img_rlogo)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; [1] "ijtiff_img" "array"</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="kw"><a href="../reference/display.html">display</a></span>(img_rlogo)</a></code></pre></div>
<p><img src="reading-and-writing-images_files/figure-html/one-frame-1.png" width="150"></p>
<p>You can also have an image with only 1 channel:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">path_rlogo_grey &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"img"</span>, <span class="st">"Rlogo-grey.tif"</span>, <span class="dt">package =</span> <span class="st">"ijtiff"</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">img_rlogo_grey &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_tif.html">read_tif</a></span>(path_rlogo_grey)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; Reading Rlogo-grey.tif: a 32-bit, 76x100 pixel image of</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; floating point type. Reading 1 channel and 1 frame . . .</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;  Done.</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(img_rlogo_grey)  <span class="co"># 1 channel, 1 frame</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; [1]  76 100   1   1</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="kw"><a href="../reference/display.html">display</a></span>(img_rlogo_grey)</a></code></pre></div>
<p><img src="reading-and-writing-images_files/figure-html/one-channel-1.png" width="150"></p>
</div>
</div>
<div id="writing-tiff-files" class="section level2">
<h2 class="hasAnchor">
<a href="#writing-tiff-files" class="anchor"></a>Writing TIFF files</h2>
<p>To write an image, you need an object in the style of an <code>ijtiff_img</code> object. You can read about those <a href="https://ropensci.github.io/ijtiff/reference/ijtiff_img.html">here</a>. The basic idea is to have your image in a 4-dimensional array with the structure <code>img[y, x, channel, frame]</code>. Then, to write this image to the location <code>path</code>, you just type <code><a href="../reference/write_tif.html">write_tif(img, path)</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">path &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>(<span class="dt">pattern =</span> <span class="st">"dancing-banana"</span>, <span class="dt">fileext =</span> <span class="st">".tif"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(path)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; [1] "/tmp/RtmpBt9dAL/dancing-banana73be4bc8a477.tif"</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="../reference/write_tif.html">write_tif</a></span>(img_dancing_banana, path)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; Writing dancing-banana73be4bc8a477.tif: an 8-bit, 155x200</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; pixel image of unsigned integer type with 3 channels and 8</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; frames . . .</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  Done.</span></a></code></pre></div>
</div>
<div id="reading-text-images" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-text-images" class="anchor"></a>Reading text images</h2>
<p>You may have a text image that you want to read (but realistically, you might never).<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">path_txt_img &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"img"</span>, <span class="st">"Rlogo-grey.txt"</span>, <span class="dt">package =</span> <span class="st">"ijtiff"</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">txt_img &lt;-<span class="st"> </span><span class="kw"><a href="../reference/text-image-io.html">read_txt_img</a></span>(path_txt_img)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; Reading 76x100 pixel text image 'Rlogo-grey.txt' . . .</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;  Done.</span></a></code></pre></div>
</div>
<div id="writing-text-images" class="section level2">
<h2 class="hasAnchor">
<a href="#writing-text-images" class="anchor"></a>Writing text images</h2>
<p>Writing a text image works as you’d expect.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/text-image-io.html">write_txt_img</a></span>(txt_img, <span class="dt">path =</span> <span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>(<span class="dt">pattern =</span> <span class="st">"txtimg"</span>, <span class="dt">fileext =</span> <span class="st">".txt"</span>))</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; Writing txtimg73be79ea0400.txt: a 76x100 pixel text image with 1 channel and 1 frame . . .</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;  Done.</span></a></code></pre></div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>If you don’t know what text images are, see <a href="https://ropensci.github.io/ijtiff/articles/text-images.html" class="uri">https://ropensci.github.io/ijtiff/articles/text-images.html</a>.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#reading-tiff-files">Reading TIFF files</a></li>
      <li><a href="#writing-tiff-files">Writing TIFF files</a></li>
      <li><a href="#reading-text-images">Reading text images</a></li>
      <li><a href="#writing-text-images">Writing text images</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Rory Nolan, Kent Johnson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
